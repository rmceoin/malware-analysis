<script>
  document.getElementById('js-download-hero').onclick = (e) => {
    e.preventDefault();
    var params = new URLSearchParams(document.location.search.substr(1));
    var _subid = subid || getSubId();
    var _token = token || getToken();
    var _pixel = pixel || getPixel();

    params.set("_token", _token);
    setCookie("pixel", _pixel);
    setCookie("token", _token);
    setCookie("subid", _subid);
    setCookie("FPID", FPID);
    setCookie("DownloadMouse", DownloadMouse);

    var data = JSON.stringify({
        FPID: FPID,
        DownloadMouse: DownloadMouse,
        Domain: window.location.hostname,
        RGET: 'W10=',
        FileID: '12CR3zJzTg'
    });

    try {
        var url = new URL(location.protocol + '//' + location.host + atob('P19scD0x'));
        url.searchParams.append('FPID', FPID);
        url.searchParams.append('DownloadMouse', DownloadMouse);
        url.searchParams.append('D', btoa(data));
        // url.searchParams.append('timestamp', ts);
        params.forEach(function(v, k) {
            if ([...url.searchParams.keys()].includes(k)) {return;}
            url.searchParams.append(k, v);
        });
        window.location.href = url.toString();
    } catch (e) {
        console.error(
            `[Exception] Bad params: unexpected link '${url.href}' for new Url()`
        );
    }
  }
</script>
